<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <title>News</title>
</head>
<body>

<form th:action="@{/addNewPost}" method="POST" enctype="application/json">
    <div>
        <input type="text" th:placeholder="#{label.post.text}" name="text"/>
        <input type="text" th:placeholder="#{label.post.categories}" name="categories"/>
    </div>
    <button type="submit" th:text="#{label.form.submit}"></button>
</form>
<span th:if="${not #lists.isEmpty(posts)}">
    <div th:each="post: ${posts}">
        <span th:text="${post.text}"/>
        <th:block th:each="category: ${post.getCategoriesList()}">
            categories: <th:block th:text="${category.getCategoryName()}"></th:block>
        </th:block>
    </div>
</span>

<style>
.modal {
display: none;
position: fixed;
z-index: 1;
padding-top: 100px;
left: 0;
top: 0;
width: 100%;
height: 100%;
overflow: auto;
background-color: rgb(0,0,0);
background-color: rgba(0,0,0,0.4);
}

.modal-content {
background-color: #fefefe;
margin: auto;
padding: 20px;
border: 1px solid #888;
width: 70%;
height: 70%;
}

.close {
color: #aaaaaa;
float: right;
font-size: 28px;
font-weight: bold;
}

.close:hover, .close:focus {
color: #000;
text-decoration: none;
cursor: pointer;
}
</style>
</head>

<button id="myBtn" th:text="#{label.modal.editBtn}"></button>

<div id="myModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <form th:action="@{/updatePost}" th:object="${post}" method="POST" enctype="application/json">
            <span th:field="*{username}"></span>
        </form>
    </div>
</div>

<script>
var modal = document.getElementById("myModal");
var btn = document.getElementById("myBtn");
var span = document.getElementsByClassName("close")[0];

btn.onclick = function() { modal.style.display = "block"; }

span.onclick = function() { modal.style.display = "none"; }

window.onclick = function(event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}
</script>
</body>
</html>